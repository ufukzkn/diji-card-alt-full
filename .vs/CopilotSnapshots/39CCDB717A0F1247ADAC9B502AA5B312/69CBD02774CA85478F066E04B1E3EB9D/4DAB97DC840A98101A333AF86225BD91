<!-- mod butonları -->
<div class="mode-buttons">
  <button (click)="toggleMode('add')">➕</button>
  <button (click)="toggleMode('delete')">➖</button>
  <button (click)="toggleMode('edit')">✏️</button>
</div>



<!-- + MOD: yeni tanım / link ekle -->
<div *ngIf="mode==='add'">
  <select [(ngModel)]="selectedDefinitionId">
    <option value="" disabled>Tanım seç</option>
    <option *ngFor="let d of availableDefinitions()" [value]="d.definitionId">
      {{ d.definitionName }}
    </option>
    <option value="__new">+ Yeni Tanım…</option>
  </select>

  <input *ngIf="selectedDefinitionId==='__new'"
         [(ngModel)]=" newDefinitionName"
         placeholder="Yeni tanım adı" />

  <input [(ngModel)]="value" placeholder="Bağlantı / değer" />

  <button (click)="add()">Ekle</button>
</div>

<!-- – MOD: var olan linkleri sil -->
<div *ngIf="mode==='delete'">
  <select [(ngModel)]="selectedToDelete">
    <option value="" disabled>Silinecek tanımı seç</option>
    <option *ngFor="let l of userLinks" [value]="l.definitionId">
      {{ definitionName(l.definitionId) }}
    </option>
  </select>

  <button [disabled]="!selectedToDelete"
          (click)="delete(selectedToDelete!)">
    Sil
  </button>
</div>

<!-- EDIT MODE -->
<div *ngIf="mode==='edit'">
  <ul>
    <li *ngFor="let l of userLinks">
      <strong>{{ definitionName(l.definitionId) }}:</strong>
      <span *ngIf="editingDefId!==l.definitionId">{{ l.value }}</span>
      <input *ngIf="editingDefId===l.definitionId"
             [(ngModel)]="editValue" />
      <button *ngIf="editingDefId!==l.definitionId"
              (click)="startEdit(l)">
        Düzenle
      </button>
      <button *ngIf="editingDefId===l.definitionId"
              (click)="saveEdit(l.definitionId)">
        Kaydet
      </button>
      <button *ngIf="editingDefId===l.definitionId"
              (click)="cancelEdit()">
        İptal
      </button>
    </li>
  </ul>
</div>
