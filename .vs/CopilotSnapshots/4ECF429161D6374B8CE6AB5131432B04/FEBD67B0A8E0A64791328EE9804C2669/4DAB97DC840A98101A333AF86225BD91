<!-- mod butonları -->
<div class="mode-buttons">
  <button (click)="toggleMode('add')" [class.active]="mode==='add'">➕</button>
  <button (click)="toggleMode('delete')" [class.active]="mode==='delete'">➖</button>
  <button (click)="toggleMode('edit')" [class.active]="mode==='edit'">✏️</button>
</div>

<!-- + MOD: yeni tanım / link ekle -->
<div *ngIf="mode==='add'" class="mode-panel">
  <select [(ngModel)]="selectedDefinitionId">
    <option value="" disabled>Tanım seç</option>
    <option *ngFor="let d of availableDefinitions()" [value]="d.definitionId">
      {{ d.definitionName }}
    </option>
    <option value="__new">+ Yeni Tanım…</option>
  </select>

  <input *ngIf="selectedDefinitionId==='__new'"
         [(ngModel)]=" newDefinitionName"
         placeholder="Yeni tanım adı" />

  <input [(ngModel)]="value" placeholder="Bağlantı / değer" />

  <button (click)="add(); linksChanged()">Ekle</button>
</div>

<!-- – MOD: var olan linkleri sil -->
<div *ngIf="mode==='delete'" class="mode-panel">
  <select [(ngModel)]="selectedToDelete">
    <option value="" disabled>Silinecek tanımı seç</option>
    <option *ngFor="let l of userLinks" [value]="l.definitionId">
      {{ definitionName(l.definitionId) }}
    </option>
  </select>

  <button [disabled]!="!selectedToDelete"
          (click)="delete(selectedToDelete!); linksChanged()">
    Sil
  </button>
</div>

<!-- EDIT MODE: mevcut tanımı seçip değerini güncelle -->
<div *ngIf="mode==='edit'" class="mode-panel">
  <select [(ngModel)]="selectedToEdit">
    <option value="" disabled>Düzenlenecek tanımı seç</option>
    <option *ngFor="let l of userLinks" [value]="l.definitionId">
      {{ definitionName(l.definitionId) }}
    </option>
  </select>
  <input *ngIf="selectedToEdit" [(ngModel)]="editValue" placeholder="Yeni değer" />
  <button [disabled]!="!selectedToEdit || !editValue" (click)="edit(); linksChanged()">Kaydet</button>
</div>

