<!-- Mod Seçimi -->
<div class="mode-buttons">
  <button class="mode-btn"
          [class.active]="mode==='add'"
          (click)="toggleMode('add')"
          title="Ekle">
    ➕
  </button>
  <button class="mode-btn"
          [class.active]="mode==='delete'"
          (click)="toggleMode('delete')"
          title="Sil">
    ➖
  </button>
  <button class="mode-btn"
          [class.active]="mode==='edit'"
          (click)="toggleMode('edit')"
          title="Düzenle">
    ✏️
  </button>
</div>

<!-- + MOD: Yeni Tanım / Link Ekle -->
<div *ngIf="mode==='add'" class="mode-panel add-panel">
  <select [(ngModel)]="selectedDefinitionId">
    <option value="" disabled>Tanım seç</option>
    <option *ngFor="let d of availableDefinitions()" [value]="d.definitionId">
      {{ d.definitionName }}
    </option>
    <option value="__new">+ Yeni Tanım…</option>
  </select>

  <input *ngIf="selectedDefinitionId==='__new'"
         [(ngModel)]="newDefinitionName"
         placeholder="Yeni tanım adı" />

  <input [(ngModel)]="value"
         placeholder="Bağlantı / değer" />

  <button class="action-btn" (click)="add()">Ekle</button>
</div>

<!-- – MOD: Var Olan Linkleri Sil -->
<div *ngIf="mode==='delete'" class="mode-panel delete-panel">
  <select [(ngModel)]="selectedToDelete">
    <option value="" disabled>Silinecek tanımı seç</option>
    <option *ngFor="let l of userLinks" [value]="l.definitionId">
      {{ definitionName(l.definitionId) }}
    </option>
  </select>

  <button class="action-btn delete-btn"
          [disabled]="!selectedToDelete"
          (click)="delete(selectedToDelete!)">
    Sil
  </button>
</div>

<!-- EDIT MOD: Var Olan Değeri Güncelle -->
<div *ngIf="mode==='edit'" class="mode-panel edit-panel">
  <select [(ngModel)]="selectedToEdit">
    <option value="" disabled>Düzenlenecek tanımı seç</option>
    <option *ngFor="let l of userLinks" [value]="l.definitionId">
      {{ definitionName(l.definitionId) }}
    </option>
  </select>

  <input *ngIf="selectedToEdit"
         [(ngModel)]="editValue"
         placeholder="Yeni değer" />

  <button class="action-btn edit-btn"
          [disabled]="!selectedToEdit || !editValue"
          (click)="edit()">
    Kaydet
  </button>
</div>
